(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shoucang-shoucang"],{"194a":function(t,e,n){"use strict";n.r(e);var i=n("ca0a"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},2909:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=c(n("6005")),a=c(n("db90")),o=c(n("06c5")),s=c(n("3427"));function c(t){return t&&t.__esModule?t:{default:t}}function r(t){return(0,i.default)(t)||(0,a.default)(t)||(0,o.default)(t)||(0,s.default)()}},"31a8":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center p-1 border-bottom",staticStyle:{height:"250rpx"}},[n("v-uni-image",{staticClass:"rounded mx-2",staticStyle:{width:"220rpx",height:"220rpx"},attrs:{src:t.bookImgUrl,mode:"aspectFill"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toBookDetail(t.bookID)}}}),n("v-uni-view",{staticClass:"flex-1 position-relative",staticStyle:{height:"100%"}},[n("v-uni-view",{staticClass:"py-1 font-md font-weight-bold",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toBookDetail(t.bookID)}}},[t._v(t._s(t._f("format")(t.bookName)))]),n("v-uni-view",{staticClass:"font text-light-black Multi-row-truncation",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toBookDetail(t.bookID)}}},[t._v(t._s(t.bookSynopsis))]),n("my-icon",{staticClass:"position-absolute right-0",attrs:{iconId:"icon-diandian"},on:{"my-click":function(e){arguments[0]=e=t.$handleEvent(e),t.init.apply(void 0,arguments)}}})],1)],1)},o=[]},3296:function(t,e,n){"use strict";var i=n("4ea4");n("99af"),n("c740"),n("a434"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("2909")),o=i(n("945c")),s=i(n("7bbb")),c=i(n("3a46")),r=i(n("6d64")),l=i(n("adee")),u=i(n("e409")),f={data:function(){return{statusBarHeight:this.statusBarHeight,calHeight:0,tabIndex:0,showCancalColStatus:!1,collectedArr:[],cancalColID:0,next_shouchang:null,sc_freshing:!1,ls_freshing:!1,is_init_shouchang:!1,lishiArr:[],is_init_lishi:!1,next_lishi:null,is_shouchang:!0,is_lishi:!0}},components:{searchBox:s.default,tabTop:c.default,collectItem:r.default,uniPopup:u.default,lishi:l.default},watch:{showCancalColStatus:function(t){t?uni.hideTabBar({animation:!0}):uni.showTabBar({animation:!0})}},methods:{changeTabIndex:function(t){this.tabIndex=t},swiperChangeIndex:function(t){this.tabIndex=t.detail.current},get_shouchang:function(){var t=this;this.collectedArr=[],uni.request({url:"api/v2/user_book_v2?sc=1",method:"GET",success:function(e){200==e.statusCode&&(e.data.results.length>0?(t.collectedArr=e.data.results,t.next_shouchang=e.data.next):t.is_shouchang=!1)},fail:function(){uni.showToast({title:"加载失败",icon:"error"})}})},get_next_page_shouchang:function(){var t=this;this.next_shouchang?uni.request({url:this.next_shouchang,method:"GET",success:function(e){200==e.statusCode&&(t.collectedArr=[].concat((0,a.default)(t.collectedArr),(0,a.default)(e.data.results)),t.next_shouchang=e.data.next)},fail:function(){uni.showToast({title:"加载失败",icon:"error"})}}):uni.showToast({title:"没有更多数据了"})},init_shouchang:function(){var t=this;this.sc_freshing||(this.sc_freshing=!0,this.is_init_shouchang||(this.is_init_shouchang=!0),setTimeout((function(){t.get_shouchang(),t.is_init_shouchang=!1,t.sc_freshing=!1}),1e3))},get_lishi:function(){var t=this;this.lishiArr=[],uni.request({url:"api/v2/user_book_v2?sc_notlook=1",method:"GET",success:function(e){200==e.statusCode&&(e.data.results.length>0?(t.lishiArr=e.data.results,t.next_lishi=e.data.next):t.is_lishi=!1)},fail:function(){uni.showToast({title:"加载失败",icon:"error"})}})},get_next_page_lishi:function(){var t=this;this.next_shouchang?uni.request({url:this.next_lishi,method:"GET",success:function(e){200==e.statusCode&&(t.collectedArr=[].concat((0,a.default)(t.lishiArr),(0,a.default)(e.data.results)),t.next_lishi=e.data.next)},fail:function(){uni.showToast({title:"加载失败",icon:"error"})}}):uni.showToast({title:"没有更多数据了"})},init_lishi:function(){var t=this;this.ls_freshing||(this.ls_freshing=!0,this.is_init_lishi||(this.is_init_lishi=!0),setTimeout((function(){t.get_lishi(),t.is_init_lishi=!1,t.ls_freshing=!1}),1e3))},initData:function(){this.get_shouchang(),this.get_lishi()},getID:function(t){this.cancalColID=t},IDtoIndex:function(t){return this.collectedArr.findIndex((function(e){return e.collection.id===t}))},cancalCollect:function(){var t=this,e=this.IDtoIndex(this.cancalColID),n=this.collectedArr[e];uni.request({url:"api/v2/user_book_v2/".concat(n.id),method:"PUT",dataType:"json",data:JSON.stringify({collect:!n.collect,collection:n.collection.id}),success:function(i){i.data.collect==!n.collect?(uni.showToast({title:"改变状态成功"}),t.collectedArr.splice(e,1),t.showCancalCol(!1)):(uni.showToast({title:"改变状态失败"}),t.showCancalCol(!1))}})},showCancalCol:function(t){t?this.$refs.popup.open():this.$refs.popup.close()},changeStatus:function(t){this.showCancalColStatus=t.show}},onLoad:function(){this.initData(),this.sc_freshing=!1,this.ls_freshing=!1},mounted:function(){var t=this;o.default.calSurplusHeight({pageID:this,pos:"cal",isTabBarPage:!0,success:function(e){return t.calHeight=e}})}};e.default=f},3427:function(t,e,n){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},3689:function(t,e,n){"use strict";n.r(e);var i=n("e2ec"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"3a46":function(t,e,n){"use strict";n.r(e);var i=n("d686"),a=n("7b72");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"3ffebeaf",null,!1,i["a"],s);e["default"]=r.exports},"540b":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniPopup:n("e409").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"cal",style:{height:t.statusBarHeight+"px"}}),n("search-box",{staticClass:"cal"}),n("tab-top",{staticClass:"cal",attrs:{tabIndex:t.tabIndex,tabArr:["收藏","未看"]},on:{changeTabIndex:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTabIndex.apply(void 0,arguments)}}}),n("v-uni-swiper",{style:{height:t.calHeight+"rpx"},attrs:{current:t.tabIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChangeIndex.apply(void 0,arguments)}}},[n("v-uni-swiper-item",[n("v-uni-scroll-view",{style:{height:t.calHeight+"rpx"},attrs:{"scroll-y":!0,"refresher-enabled":!0,"refresher-triggered":t.is_init_shouchang},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.get_next_page_shouchang.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.init_shouchang.apply(void 0,arguments)}}},[t.is_shouchang?n("v-uni-view",[t._l(t.collectedArr,(function(e,i){return[n("collect-item",{key:i+"_0",attrs:{bookID:e.collection.id,bookImgUrl:e.collection.img,bookName:e.collection.name,bookSynopsis:e.collection.introduction},on:{getID:function(e){arguments[0]=e=t.$handleEvent(e),t.getID.apply(void 0,arguments)},showCancalCol:function(e){arguments[0]=e=t.$handleEvent(e),t.showCancalCol.apply(void 0,arguments)}}})]}))],2):n("v-uni-view",{staticStyle:{width:"100%"}},[n("h2",{staticClass:"text-light-black",attrs:{align:"center"}},[t._v("没有数据")])])],1)],1),n("v-uni-swiper-item",[n("v-uni-scroll-view",{style:{height:t.calHeight+"rpx"},attrs:{"scroll-y":!0,"refresher-enabled":!0,"refresher-triggered":t.is_init_lishi},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.get_next_page_lishi.apply(void 0,arguments)},refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.init_lishi.apply(void 0,arguments)}}},[t.is_lishi?n("v-uni-view",[t._l(t.lishiArr,(function(t,e){return[n("lishi",{key:e+"_0",attrs:{bookID:t.collection.id,bookImgUrl:t.collection.img,bookName:t.collection.name,bookSynopsis:t.collection.introduction}})]}))],2):n("v-uni-view",{staticStyle:{width:"100%"}},[n("h2",{staticClass:"text-light-black",attrs:{align:"center"}},[t._v("没有数据")])])],1)],1)],1),n("uni-popup",{ref:"popup",attrs:{type:"bottom"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeStatus.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"bg-white"},[n("v-uni-view",{staticStyle:{height:"100rpx","line-height":"100rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancalCollect.apply(void 0,arguments)}}},[n("my-icon",{staticClass:"px-3",attrs:{iconId:"icon-xingxing",iconColor:"text-danger"}}),n("v-uni-text",{staticClass:"font"},[t._v("取消收藏")])],1),n("v-uni-view",{staticClass:"bg-hover-light",staticStyle:{height:"15rpx"}}),n("v-uni-view",{staticClass:"text-center",staticStyle:{height:"110rpx","line-height":"110rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showCancalCol(!1)}}},[t._v("取消")])],1)],1)],1)},o=[]},"5b2f":function(t,e,n){"use strict";n.r(e);var i=n("540b"),a=n("bf92");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"05a06ef8",null,!1,i["a"],s);e["default"]=r.exports},6005:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var i=a(n("6b75"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t))return(0,i.default)(t)}},"69d7":function(t,e,n){"use strict";n.r(e);var i=n("9d7b"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"6d64":function(t,e,n){"use strict";n.r(e);var i=n("31a8"),a=n("194a");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"796b2caf",null,!1,i["a"],s);e["default"]=r.exports},"75f3":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center p-1 border-bottom",staticStyle:{height:"250rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toBookDetail(t.bookID)}}},[n("v-uni-image",{staticClass:"rounded mx-2",staticStyle:{width:"220rpx",height:"220rpx"},attrs:{src:t.bookImgUrl,mode:"aspectFill"}}),n("v-uni-view",{staticClass:"flex-1 position-relative",staticStyle:{height:"100%"}},[n("v-uni-view",{staticClass:"py-1 font-md font-weight-bold"},[t._v(t._s(t._f("format")(t.bookName)))]),n("v-uni-view",{staticClass:"font text-light-black Multi-row-truncation"},[t._v(t._s(t.bookSynopsis))])],1)],1)},o=[]},"7b72":function(t,e,n){"use strict";n.r(e);var i=n("9050"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"7bbb":function(t,e,n){"use strict";n.r(e);var i=n("94e3"),a=n("69d7");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"6513da84",null,!1,i["a"],s);e["default"]=r.exports},9050:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{tabIndex:{type:Number,default:0},tabArr:{type:Array,default:function(){return[]}}},methods:{changeTabIndex:function(t){this.$emit("changeTabIndex",t)}}};e.default=i},"94e3":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"flex align-center justify-center mx-2 border rounded bg-light",staticStyle:{opacity:"0.8",height:"80rpx"}},[n("myIcon",{staticClass:"p-2",attrs:{iconId:"icon-tubiao11",iconSize:"25",iconColor:"text-light-muted"}}),n("v-uni-input",{staticClass:"flex-1",attrs:{type:"text",placeholder:"搜索书本名或章节名"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.search.apply(void 0,arguments)}}})],1)],1)},o=[]},"9d7b":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"search",data:function(){return{statusBarHeight:this.statusBarHeight,search_text:""}},methods:{search:function(t){uni.navigateTo({url:"/pages/listenNoval/listenNoval?type=search&name=搜索&search=".concat(t.detail.value)})}}};e.default=i},adee:function(t,e,n){"use strict";n.r(e);var i=n("75f3"),a=n("3689");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s,c=n("f0c5"),r=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"6c5b9807",null,!1,i["a"],s);e["default"]=r.exports},bf92:function(t,e,n){"use strict";n.r(e);var i=n("3296"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},ca0a:function(t,e,n){"use strict";n("fb6a"),n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{bookID:{type:Number,default:0},bookImgUrl:{type:String,default:""},bookName:{type:String,default:""},bookSynopsis:{type:String,default:""}},methods:{init:function(){this.showCancalCol(!0),this.throwID(this.bookID)},throwID:function(t){this.$emit("getID",t)},showCancalCol:function(t){this.$emit("showCancalCol",t)},toBookDetail:function(t){uni.navigateTo({url:"/pages/bookDetail/bookDetail?bookID=".concat(t)})}},filters:{format:function(t){return t.length>25?"".concat(t.slice(0,25),".."):t}}};e.default=i},d686:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"flex align-center border-bottom",staticStyle:{height:"80rpx","justify-content":"space-around"}},[t._l(t.tabArr,(function(e,i){return[n("v-uni-view",{key:i+"_0",staticClass:"flex flex-column align-center justify-between",staticStyle:{height:"80rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTabIndex(i)}}},[n("v-uni-view",{staticClass:"text-light-black pt-1 animated faster",class:t.tabIndex===i?"font-weight-bold pulse":""},[t._v(t._s(e))]),t.tabIndex===i?n("v-uni-view",{staticClass:"rounded animated zoomIn faster",staticStyle:{width:"80rpx",height:"8rpx","background-color":"#fb5f39"}}):t._e()],1)]}))],2)},o=[]},db90:function(t,e,n){"use strict";function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},e2ec:function(t,e,n){"use strict";n("fb6a"),n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{bookID:{type:Number,default:0},bookImgUrl:{type:String,default:""},bookName:{type:String,default:""},bookSynopsis:{type:String,default:""}},methods:{toBookDetail:function(t){uni.navigateTo({url:"/pages/bookDetail/bookDetail?bookID=".concat(t)})}},filters:{format:function(t){return t.length>25?"".concat(t.slice(0,25),".."):t}}};e.default=i}}]);